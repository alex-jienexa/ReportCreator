<h1 align="center">Ситсема формирования отчетов <b>WReport</b></h1>
<h3>Здеcь будут содержать все файлы для командного проекта по формирования отчетов компании между заказчиками</h3>

# Начало работы
## Клонирование репозитория
1. Выполните клонирование репозитория через команду в нужную директорию:
```
git clone https://github.com/EmAksS/ReportCreator.git
```
2. Создадите и запустите виртуальную среду в директории `reportcreator`:
```
python -m venv venv
.\venv\Scripts\activate
```
3. Установите все зависимости через `requirements.txt`
```
pip install -r ../requirements.txt
```
4. Создадите и заполните `.env`-файл. Структура переменных описана в файле `.env.dist`
    - Значение `DEBUG` ставить на `True`, кроме случаев загрузки сайта на продакшн.
    - Значение `SECRET_KEY` лучше получить, создав пустой проект Django и взяв оттуда значение SECRET_KEY:
    ```
    django-admin startproject testtest
    ```
    После чего в файле `testtest\testtest\settings.py` находим поле `SECRET_KEY`.
4. Создайте новую ветку Git'a для работы.

## Миграции
Приложение содержит *миграции* - это специальные файлы для организации базы данных.
По умолчанию, миграции уже приготовлены и они располагаются в директориях `migrations` каждого приложения.
Перед первым запуском приложения, примените эти миграции для организации полей базы данных:
```
py .\manage.py migrate
```
После этого, будут организованы различные таблицы в базе данных (`dbsqlite3`).

*Примечание:* Если мы изменяете структуру базы данных (т.е. меняете файл `models.py` в каком-то приложении), вам нужно создать миграции командой: 
```
py .\manage.py makemigrations
```
...и далее применить миграции командой `migrate`.

## Запуск приложения
1. Перейдите в директорию `reportcreator`.
2. Введите команду:
```
python manage.py runserver
```
3. Перейдите по ссылке http://127.0.0.1:8000/ в браузере.

# Документация по работе
## Глосарий
- Исполнитель - компания, которая зарегистрирована как исполнитель услуг. 
- Заказчик - внешняя компания, которая зарегистрирована как заказчик услуг исполнителя.
- Модель - таблица баз данных, куда сохраняются данные
## Приложение компаний
Все действия с компаниями будут происходить в отдельном приложении Django под названием **companies**.
Объявление моделей компаний указано в файле `/companies/models.py`
### Абстрактная модель компании
Это базовая модель, где будут находиться общие поля для каждой компании (Исполнителя и Заказчика):
- ID (ключевое поле, автоинкрементирующий номер)
- Название компании (с сокращением и абревиатурами: ООО "Трайв Технолоджис")
- Полное название компании (с расшифровкой абревиатур: общество с ограниченной ответственностью «Трайв Технолоджис»)
- Название должности (директор или ген.директор)
- ФИО директора (полностью - Иванов Иван Иванович)

**ID** - это автоинкрементирующее поле, действие которое переходит в качестве Django и является ключевым полем для элемента. Тип данных - число.

**Название компании** (`company_name`) - обязательное поле. Принимает название компании с сокращениями и абревиатурами. Максимальная длина поля - 64 символа. Принимает только текстовые символы.

**Полное название компании** (`company_fullName`) - текстовое поле, которое содержит полное название компании с расшифровкой всех абревиатур. Максимальная длина 256 символов. Не может быть пустым. Если при создании элемента значение не задано, то принимает значение поля `company_name`.

**Название должности руководителя** (`director_post`) - именование должности руководителя, от чьего имени будут подписываться все документы от компании. Максимальная длина - 32 символа. Не может быть пустым. По умолчанию или если поле не было заполнено, принимает значение "Директор"

**ФИО руководителя** (`director_name`) - ФИО руководителя полностью, от чьего имени будут подписываться документы. Не может быть пустым. Максимальная длина - 64 символа.

**Инициалы руководителя** (`director_shortName`) - инициалы руководителя компании. Максимальная длина строки - 32 символа. Не может быть пустым. 
	В дальнейшем оно будет автоматически создаваться из значений поля `director_name`.

### Исполнитель
Модель наследует все поля из абстрактной модели компании.
> *Имеются ли дополнительные поля у исполнителя?*

### Заказчик
Модель компании-заказчика, который выполняет заказ у компании-исполнителя. Наследует все поля из абстрактной модели компании, а также добавляются дополнительные поля:

**Город-месторасположение компании** (`contractor_city`) - название города, где располагается компания-заказчик. Представляет собой строку, максимальная длина равна 64 символа. Не может быть пустым.

## Пользователь системы
Модель пользователя системы, который выполняет работу с системой.
Каждый пользователь связан с конкретной компанией-исполнителем.
Пользователь может быть связан только с одной конкретной компанией.

Здесь представлена только информация с пользователем, как объектом системы.
Чтобы получить информацию о пользователе, как объекта для аутентификации, смотрите `forms.py`.

Поля пользователя:
- username - имя пользователя в системе.
- last_name - фамилия пользователя.
- first_name - имя пользователя.
- patronymic - отчество пользователя.
- related_company - компания, которой принадлежит пользователь. Является полем таблицы `companies.Executor`.

*Все другие вопросы спрашивайте на странице проекта в Трекере.*